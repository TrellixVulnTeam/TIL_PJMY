# 0413 수요일 Foreign Key

![image-20220413123730342](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413123730342.png)

굳이 안써도 되는데 Article에서 pk를 가져오는데 없다면 404에러를 뜨게해라

---

## Foreign Key

* 관계형 데이터베이스에서 한 테이블 필드 중 다른 테이블의 행을 식별할 수 있는 키

* 참조되는 테이블의 기본키
* 참조하는 테이블에서 속성에 해당
* 참조하는 테이블의 외래 키는 참조되는 테이블 행 1개에 대응함
* 참조 무결성 (키를 사용하여 부모 테이블의 유일한 값을 참조)
* 외래 키의 값이 반드시 부모 테이블의 기본 키일 필요는 없지만 유일한 값이어야함
* 참조 무결성 

![image-20220413130332193](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130332193.png)

![image-20220413130340365](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130340365.png)

![image-20220413130443812](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130443812.png)



![image-20220413130456069](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130456069.png)

![image-20220413130518263](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130518263.png)



### fk 설정 후 migration하면 필드이름에 _id가 추가됨

![image-20220413130618205](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130618205.png)

![image-20220413130629809](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130629809.png)

![image-20220413130744510](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130744510.png)



---

## 댓글 생성 연습하기

![image-20220413130811257](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130811257.png)

![image-20220413130829209](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130829209.png)

![image-20220413130851450](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130851450.png)

![image-20220413130904551](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130904551.png)

![image-20220413130953260](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413130953260.png)

![image-20220413131054644](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413131054644.png)

![image-20220413131103567](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413131103567.png)



## admin site에서 작성된 댓글 확인

![image-20220413131128664](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413131128664.png)

![image-20220413131250950](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413131250950.png)



장고의 폼 종류는 2가지

![image-20220413134125209](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413134125209.png)



1. CommentForm() : 언바운드폼 (폼은 있지만 데이터는 없음)
2. CommentForm(request.POST) : 바운드폼 (폼도 있고, 데이터도 있음)
3. 장고는 바운드폼에서만 유효성 검사를 함.



![image-20220413134346943](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413134346943.png)

1. 바운드된 폼 그자체
2. 모델 인스턴스

3. commit = False는 바로 DB에 저장 X





user model커스텀, 했으니 기존 모델도 커스텀해주고 

다연결해보자!

![image-20220413163505851](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413163505851.png)

AbstractUser를 상속받고 있음

![image-20220413163735286](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413163735286.png)

어제쓴거 상속받아서 새클래스 만들어 

![image-20220413164711302](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413164711302.png)

장고보단 db로 많이 물어봄

![image-20220413164857206](0413%20%EC%88%98%EC%9A%94%EC%9D%BC.assets/image-20220413164857206.png)